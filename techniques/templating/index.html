<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Ellar - Python ASGI web framework for building fast, efficient and scalable RESTAPIs and server-side application."><link href=https://github.com/python-ellar/ellar/techniques/templating/ rel=canonical><link href=../caching/ rel=prev><link href=../staticfiles/ rel=next><link rel=icon href=../../img/Icon.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.49"><title>Html -</title><link rel=stylesheet href=../../assets/stylesheets/main.6f8fc17f.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Source Sans Pro";--md-code-font:"Fira Code"}</style><link rel=stylesheet href=../../assets/_mkdocstrings.css><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=pink data-md-color-accent=pink> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#html-templating-with-jinja class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title class="md-header__button md-logo" aria-label data-md-component=logo> <img src=../../img/EllarLogoB.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Html </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=pink data-md-color-accent=pink aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=pink data-md-color-accent=pink aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/python-ellar/ellar title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> eadwinCode/ellar </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Get Started </a> </li> <li class=md-tabs__item> <a href=../../overview/step-one/ class=md-tabs__link> Overview </a> </li> <li class=md-tabs__item> <a href=../../basics/execution-context/ class=md-tabs__link> Essentials </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../configurations/ class=md-tabs__link> Techniques </a> </li> <li class=md-tabs__item> <a href=../../security/authentication/guard-strategy/ class=md-tabs__link> Security </a> </li> <li class=md-tabs__item> <a href=../../cli/introduction/ class=md-tabs__link> CLI </a> </li> <li class=md-tabs__item> <a href=../../openapi/ class=md-tabs__link> OPENAPI </a> </li> <li class=md-tabs__item> <a href=../../websockets/websockets/ class=md-tabs__link> WebSockets </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title class="md-nav__button md-logo" aria-label data-md-component=logo> <img src=../../img/EllarLogoB.png alt=logo> </a> </label> <div class=md-nav__source> <a href=https://github.com/python-ellar/ellar title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> eadwinCode/ellar </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Get Started </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../overview/step-one/ class=md-nav__link> <span class=md-ellipsis> Overview </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../basics/execution-context/ class=md-nav__link> <span class=md-ellipsis> Essentials </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Techniques </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Techniques </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../configurations/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../validations/ class=md-nav__link> <span class=md-ellipsis> Input Validations </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../serializers/ class=md-nav__link> <span class=md-ellipsis> Serializers </span> </a> </li> <li class=md-nav__item> <a href=../response-model/ class=md-nav__link> <span class=md-ellipsis> Response Model </span> </a> </li> <li class=md-nav__item> <a href=../versioning/ class=md-nav__link> <span class=md-ellipsis> Versioning </span> </a> </li> <li class=md-nav__item> <a href=../caching/ class=md-nav__link> <span class=md-ellipsis> Caching </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_7 checked> <label class=md-nav__link for=__nav_4_7 id=__nav_4_7_label tabindex=0> <span class=md-ellipsis> Templating </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_7_label aria-expanded=true> <label class=md-nav__title for=__nav_4_7> <span class="md-nav__icon md-icon"></span> Templating </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Html </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Html </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=#quick-overview-on-jinja2-usage class=md-nav__link> <span class=md-ellipsis> Quick overview on jinja2 Usage </span> </a> </li> <li class=md-nav__item> <a href=#jinja2-usage-in-ellar class=md-nav__link> <span class=md-ellipsis> Jinja2 usage in Ellar </span> </a> <nav class=md-nav aria-label="Jinja2 usage in Ellar"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#in-controller class=md-nav__link> <span class=md-ellipsis> In Controller </span> </a> </li> <li class=md-nav__item> <a href=#in-modulerouter class=md-nav__link> <span class=md-ellipsis> In ModuleRouter </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#jinja2-configurations class=md-nav__link> <span class=md-ellipsis> Jinja2 Configurations </span> </a> </li> <li class=md-nav__item> <a href=#default-jinja-template-context class=md-nav__link> <span class=md-ellipsis> Default Jinja Template Context </span> </a> </li> <li class=md-nav__item> <a href=#static-files-in-template class=md-nav__link> <span class=md-ellipsis> Static Files In Template </span> </a> <nav class=md-nav aria-label="Static Files In Template"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#reversing-controllers-urls class=md-nav__link> <span class=md-ellipsis> Reversing Controllers URLs </span> </a> </li> <li class=md-nav__item> <a href=#reversing-module-router-urls class=md-nav__link> <span class=md-ellipsis> Reversing Module Router URLs </span> </a> </li> <li class=md-nav__item> <a href=#overriding-reversing-url-function-name class=md-nav__link> <span class=md-ellipsis> Overriding Reversing URL Function Name </span> </a> </li> <li class=md-nav__item> <a href=#adding-template-filters-and-template-globals class=md-nav__link> <span class=md-ellipsis> Adding template filters and template globals. </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#templating-context class=md-nav__link> <span class=md-ellipsis> Templating Context </span> </a> <nav class=md-nav aria-label="Templating Context"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#registering-context-templates class=md-nav__link> <span class=md-ellipsis> Registering context templates </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../staticfiles/ class=md-nav__link> <span class=md-ellipsis> Static Files </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../mount/ class=md-nav__link> <span class=md-ellipsis> Mount </span> </a> </li> <li class=md-nav__item> <a href=../background-task/ class=md-nav__link> <span class=md-ellipsis> Background Tasks </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../security/authentication/guard-strategy/ class=md-nav__link> <span class=md-ellipsis> Security </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../cli/introduction/ class=md-nav__link> <span class=md-ellipsis> CLI </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../openapi/ class=md-nav__link> <span class=md-ellipsis> OPENAPI </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../websockets/websockets/ class=md-nav__link> <span class=md-ellipsis> WebSockets </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=#quick-overview-on-jinja2-usage class=md-nav__link> <span class=md-ellipsis> Quick overview on jinja2 Usage </span> </a> </li> <li class=md-nav__item> <a href=#jinja2-usage-in-ellar class=md-nav__link> <span class=md-ellipsis> Jinja2 usage in Ellar </span> </a> <nav class=md-nav aria-label="Jinja2 usage in Ellar"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#in-controller class=md-nav__link> <span class=md-ellipsis> In Controller </span> </a> </li> <li class=md-nav__item> <a href=#in-modulerouter class=md-nav__link> <span class=md-ellipsis> In ModuleRouter </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#jinja2-configurations class=md-nav__link> <span class=md-ellipsis> Jinja2 Configurations </span> </a> </li> <li class=md-nav__item> <a href=#default-jinja-template-context class=md-nav__link> <span class=md-ellipsis> Default Jinja Template Context </span> </a> </li> <li class=md-nav__item> <a href=#static-files-in-template class=md-nav__link> <span class=md-ellipsis> Static Files In Template </span> </a> <nav class=md-nav aria-label="Static Files In Template"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#reversing-controllers-urls class=md-nav__link> <span class=md-ellipsis> Reversing Controllers URLs </span> </a> </li> <li class=md-nav__item> <a href=#reversing-module-router-urls class=md-nav__link> <span class=md-ellipsis> Reversing Module Router URLs </span> </a> </li> <li class=md-nav__item> <a href=#overriding-reversing-url-function-name class=md-nav__link> <span class=md-ellipsis> Overriding Reversing URL Function Name </span> </a> </li> <li class=md-nav__item> <a href=#adding-template-filters-and-template-globals class=md-nav__link> <span class=md-ellipsis> Adding template filters and template globals. </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#templating-context class=md-nav__link> <span class=md-ellipsis> Templating Context </span> </a> <nav class=md-nav aria-label="Templating Context"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#registering-context-templates class=md-nav__link> <span class=md-ellipsis> Registering context templates </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/python-ellar/ellar/blob/master/docs/techniques/templating.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <a href=https://github.com/python-ellar/ellar/raw/master/docs/techniques/templating.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg> </a> <h1 id=html-templating-with-jinja><strong>HTML Templating with <a href=https://jinja.palletsprojects.com/en/3.0.x/ target=_blank>Jinja</a></strong><a class=headerlink href=#html-templating-with-jinja title="Permanent link">&para;</a></h1> <p>Jinja2 is a powerful template engine for Python. It can be used in web applications to separate static and dynamic content, making it easier to maintain and update the dynamic content. </p> <p>In Ellar, a Model-View-Controller (MVC) framework, Jinja2 templates are typically used in the View layer to render dynamic content, while the Model and Controller layers handle the data and logic of the application.</p> <h2 id=installation><strong>Installation</strong><a class=headerlink href=#installation title="Permanent link">&para;</a></h2> <p><a href=https://jinja.palletsprojects.com/en/3.0.x/ target=_blank><code>Jinja2</code></a> package is installed alongside with Ellar.</p> <h2 id=quick-overview-on-jinja2-usage><strong>Quick overview on jinja2 Usage</strong><a class=headerlink href=#quick-overview-on-jinja2-usage title="Permanent link">&para;</a></h2> <p>A Jinja2 template is a plain text file that contains dynamic content, represented using Jinja2 syntax. Here's an example template that displays a list of items:</p> <p><div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;</span>
      {% for item in items %}
      <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>{{ item }}<span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
      {% endfor %}
    <span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</code></pre></div> The <code>{% for item in items %}</code> and <code>{% endfor %</code>} tags define a loop that iterates over the items list and displays each item as a list item. The <code>{{ item }}</code> tag inserts the value of the <code>item</code> variable into the template.</p> <p>To render the template, you'll need to use the Jinja2 API in your view function. Here's an example of how you might do this:</p> <div class=highlight><pre><span></span><code><span class=c1># main.py</span>

<span class=kn>import</span> <span class=nn>uvicorn</span>
<span class=kn>from</span> <span class=nn>jinja2</span> <span class=kn>import</span> <span class=n>Environment</span><span class=p>,</span> <span class=n>FileSystemLoader</span>
<span class=kn>from</span> <span class=nn>ellar.core</span> <span class=kn>import</span> <span class=n>Request</span><span class=p>,</span> <span class=n>AppFactory</span>
<span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>ModuleRouter</span><span class=p>,</span> <span class=n>HTMLResponse</span>
<span class=kn>from</span> <span class=nn>pathlib</span> <span class=kn>import</span> <span class=n>Path</span>

<span class=n>BASE_DIR</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=vm>__file__</span><span class=p>)</span><span class=o>.</span><span class=n>parent</span>
<span class=n>router</span> <span class=o>=</span> <span class=n>ModuleRouter</span><span class=p>(</span><span class=s1>&#39;/template-testing&#39;</span><span class=p>)</span>

<span class=c1># Also create a templates folder at the main.py root dir. And add template.html into it</span>

<span class=nd>@router</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>
<span class=k>def</span> <span class=nf>view_function</span><span class=p>(</span><span class=n>request</span><span class=p>:</span> <span class=n>Request</span><span class=p>):</span>
    <span class=c1># Load the template file</span>
    <span class=n>env</span> <span class=o>=</span> <span class=n>Environment</span><span class=p>(</span><span class=n>loader</span><span class=o>=</span><span class=n>FileSystemLoader</span><span class=p>(</span><span class=s1>&#39;templates&#39;</span><span class=p>))</span>
    <span class=n>template</span> <span class=o>=</span> <span class=n>env</span><span class=o>.</span><span class=n>get_template</span><span class=p>(</span><span class=s1>&#39;template.html&#39;</span><span class=p>)</span>

    <span class=c1># Render the template with some dynamic data</span>
    <span class=n>items</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;apple&#39;</span><span class=p>,</span> <span class=s1>&#39;banana&#39;</span><span class=p>,</span> <span class=s1>&#39;cherry&#39;</span><span class=p>]</span>
    <span class=n>rendered_template</span> <span class=o>=</span> <span class=n>template</span><span class=o>.</span><span class=n>render</span><span class=p>(</span><span class=n>items</span><span class=o>=</span><span class=n>items</span><span class=p>)</span>

    <span class=c1># Return the rendered template as the response</span>
    <span class=k>return</span> <span class=n>HTMLResponse</span><span class=p>(</span><span class=n>rendered_template</span><span class=p>)</span>

<span class=n>app</span> <span class=o>=</span> <span class=n>AppFactory</span><span class=o>.</span><span class=n>create_app</span><span class=p>(</span><span class=n>routers</span><span class=o>=</span><span class=p>[</span><span class=n>router</span><span class=p>],</span> <span class=n>template_folder</span><span class=o>=</span><span class=s1>&#39;templates&#39;</span><span class=p>,</span> <span class=n>base_directory</span><span class=o>=</span><span class=n>BASE_DIR</span><span class=p>)</span>

<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&quot;__main__&quot;</span><span class=p>:</span>
    <span class=n>uvicorn</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;main:app&quot;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>5000</span><span class=p>,</span> <span class=n>log_level</span><span class=o>=</span><span class=s2>&quot;info&quot;</span><span class=p>)</span>

<span class=c1># visit: http://127.0.0.1:5000/template-testing/</span>
</code></pre></div> <p>This example loads the <code>template.html</code> file from the <code>templates</code> directory, renders it with the items list, and returns the rendered template as the <code>HTTP</code> response to the request.</p> <p>This example also shows manual setup of using <code>jinja2</code> in Ellar.</p> <h2 id=jinja2-usage-in-ellar><strong>Jinja2 usage in Ellar</strong><a class=headerlink href=#jinja2-usage-in-ellar title="Permanent link">&para;</a></h2> <p>In Ellar, the <code>@render</code> decorator transforms the route handler response into a Templated Response via an <code>HTMLResponseModel</code> with a status code of 200. And the route handler is required to return a <code>dictionary</code> object which serves as the template's context.</p> <p>Additionally, each registered <code>Module</code> functions as a jinja2 <code>TemplateLoader</code> for loading templates, but only when a templates_folder is provided and exists.</p> <h3 id=in-controller>In Controller<a class=headerlink href=#in-controller title="Permanent link">&para;</a></h3> <p>In Controllers, the <code>@render</code> decorator uses the decorated function name + controller name to generate a path to the template when creating <code>HTMLResponseModel</code> to handle the response</p> <p>For example: <div class=highlight><pre><span></span><code><span class=c1># main.py</span>
<span class=kn>import</span> <span class=nn>uvicorn</span>
<span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>render</span><span class=p>,</span> <span class=n>Controller</span><span class=p>,</span> <span class=n>get</span>
<span class=kn>from</span> <span class=nn>ellar.app</span> <span class=kn>import</span> <span class=n>AppFactory</span>
<span class=kn>from</span> <span class=nn>pathlib</span> <span class=kn>import</span> <span class=n>Path</span>

<span class=n>BASE_DIR</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=vm>__file__</span><span class=p>)</span><span class=o>.</span><span class=n>parent</span>


<span class=nd>@Controller</span><span class=p>()</span>
<span class=k>class</span> <span class=nc>TemplateExampleController</span><span class=p>:</span>
    <span class=nd>@get</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)</span>
    <span class=nd>@render</span><span class=p>()</span>
    <span class=k>def</span> <span class=nf>index</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;Ellar Template&#39;</span><span class=p>}</span>

<span class=n>app</span> <span class=o>=</span> <span class=n>AppFactory</span><span class=o>.</span><span class=n>create_app</span><span class=p>(</span><span class=n>controllers</span><span class=o>=</span><span class=p>[</span><span class=n>TemplateExampleController</span><span class=p>],</span> <span class=n>template_folder</span><span class=o>=</span><span class=s1>&#39;templates&#39;</span><span class=p>,</span> <span class=n>base_directory</span><span class=o>=</span><span class=n>BASE_DIR</span><span class=p>)</span>

<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&quot;__main__&quot;</span><span class=p>:</span>
    <span class=n>uvicorn</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;main:app&quot;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>5000</span><span class=p>,</span> <span class=n>log_level</span><span class=o>=</span><span class=s2>&quot;info&quot;</span><span class=p>)</span>

<span class=c1># visit: http://127.0.0.1:5000/templateexample/</span>
</code></pre></div></p> <p>In this example, the <code>@render</code> decorator will create an <code>HTMLResponseModel</code> with a template path = <code>templateexample/index.html</code>. When the <code>@render</code> decorator is applied to a <code>Controller</code> class, it assumes this pattern of resolving the template part. This behavior can be overridden by providing the <code>template_name</code> parameter on the <code>@render</code> decorator.</p> <p>For example: <div class=highlight><pre><span></span><code><span class=c1># main.py</span>
<span class=kn>import</span> <span class=nn>uvicorn</span>
<span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>render</span><span class=p>,</span> <span class=n>Controller</span><span class=p>,</span> <span class=n>get</span>
<span class=kn>from</span> <span class=nn>ellar.app</span> <span class=kn>import</span> <span class=n>AppFactory</span>
<span class=kn>from</span> <span class=nn>pathlib</span> <span class=kn>import</span> <span class=n>Path</span>

<span class=n>BASE_DIR</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=vm>__file__</span><span class=p>)</span><span class=o>.</span><span class=n>parent</span>


<span class=nd>@Controller</span><span class=p>()</span>
<span class=k>class</span> <span class=nc>TemplateExampleController</span><span class=p>:</span>
    <span class=nd>@get</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)</span>
    <span class=nd>@render</span><span class=p>(</span><span class=n>template_name</span><span class=o>=</span><span class=s1>&#39;templateexample/list.html&#39;</span><span class=p>)</span>
    <span class=k>async</span> <span class=k>def</span> <span class=nf>index</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;Ellar Template&#39;</span><span class=p>}</span>

<span class=n>app</span> <span class=o>=</span> <span class=n>AppFactory</span><span class=o>.</span><span class=n>create_app</span><span class=p>(</span>
    <span class=n>controllers</span><span class=o>=</span><span class=p>[</span><span class=n>TemplateExampleController</span><span class=p>],</span> 
    <span class=n>template_folder</span><span class=o>=</span><span class=s1>&#39;templates&#39;</span><span class=p>,</span> 
    <span class=n>base_directory</span><span class=o>=</span><span class=n>BASE_DIR</span>
<span class=p>)</span>

<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&quot;__main__&quot;</span><span class=p>:</span>
    <span class=n>uvicorn</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;main:app&quot;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>5000</span><span class=p>,</span> <span class=n>log_level</span><span class=o>=</span><span class=s2>&quot;info&quot;</span><span class=p>)</span>

<span class=c1># visit: http://127.0.0.1:5000/templateexample</span>
</code></pre></div></p> <h3 id=in-modulerouter>In ModuleRouter<a class=headerlink href=#in-modulerouter title="Permanent link">&para;</a></h3> <p>In <code>ModuleRouter</code>, <code>@render</code> decorators will enforce the <code>template_name</code> provision when creating <code>HTMLResponseModel</code>. Ellar does not assume the function name to be equivalent to the template name because it's a wide scope of guess.</p> <p>A quick example: <div class=highlight><pre><span></span><code><span class=c1># main.py</span>

<span class=kn>import</span> <span class=nn>uvicorn</span>
<span class=kn>from</span> <span class=nn>ellar.app</span> <span class=kn>import</span> <span class=n>AppFactory</span>
<span class=kn>from</span> <span class=nn>ellar.core</span> <span class=kn>import</span> <span class=n>Request</span>
<span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>ModuleRouter</span><span class=p>,</span> <span class=n>render</span>
<span class=kn>from</span> <span class=nn>pathlib</span> <span class=kn>import</span> <span class=n>Path</span>

<span class=n>BASE_DIR</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=vm>__file__</span><span class=p>)</span><span class=o>.</span><span class=n>parent</span>
<span class=n>router</span> <span class=o>=</span> <span class=n>ModuleRouter</span><span class=p>(</span><span class=s1>&#39;/template-testing&#39;</span><span class=p>)</span>

<span class=nd>@router</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>
<span class=nd>@render</span><span class=p>(</span><span class=s1>&#39;some-path/template-name.html&#39;</span><span class=p>)</span>
<span class=k>async</span> <span class=k>def</span> <span class=nf>index</span><span class=p>(</span><span class=n>request</span><span class=p>:</span> <span class=n>Request</span><span class=p>):</span>
    <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;Ellar Template&#39;</span><span class=p>}</span>


<span class=n>app</span> <span class=o>=</span> <span class=n>AppFactory</span><span class=o>.</span><span class=n>create_app</span><span class=p>(</span><span class=n>routers</span><span class=o>=</span><span class=p>[</span><span class=n>router</span><span class=p>],</span> <span class=n>template_folder</span><span class=o>=</span><span class=s1>&#39;templates&#39;</span><span class=p>,</span> <span class=n>base_directory</span><span class=o>=</span><span class=n>BASE_DIR</span><span class=p>)</span>

<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&quot;__main__&quot;</span><span class=p>:</span>
    <span class=n>uvicorn</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;main:app&quot;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>5000</span><span class=p>,</span> <span class=n>log_level</span><span class=o>=</span><span class=s2>&quot;info&quot;</span><span class=p>)</span>
</code></pre></div></p> <div class="admonition info"> <p class=admonition-title>Info</p> <p><code>Jinja2</code> supports async template rendering, however as a general rule we'd recommend that you keep your templates free from logic that invokes database lookups, or other I/O operations. Instead, we'd recommend that you ensure that your endpoints perform all I/O, for example, strictly evaluate any database queries within the view and include the final results in the context.' - <a href=https://www.starlette.io/templates/#asynchronous-template-rendering target=_blank><code>Starlette Recommendation</code></a></p> </div> <h2 id=jinja2-configurations><strong>Jinja2 Configurations</strong><a class=headerlink href=#jinja2-configurations title="Permanent link">&para;</a></h2> <p>If there are specific configurations you want to apply to your Jinja2 Environment, you can look at <a href=../configurations/#jinja_templates_options target=_blank>JINJA_TEMPLATE_OPTIONS</a> configuration.</p> <h2 id=default-jinja-template-context><strong>Default Jinja Template Context</strong><a class=headerlink href=#default-jinja-template-context title="Permanent link">&para;</a></h2> <p>Every jinja template in ellar receives two context, <code>url_for</code>, <code>config</code>, <code>request</code> object and other specific context defined to render a template.</p> <ul> <li><code>url_for</code> is a utility function that helps to resolve path to files and url(reversing url)</li> <li><code>config</code> is current application configuration object.</li> <li><code>request</code> is current request object.</li> </ul> <h2 id=static-files-in-template><strong>Static Files In Template</strong><a class=headerlink href=#static-files-in-template title="Permanent link">&para;</a></h2> <p>As stated above, you can resolve file paths to static files using <code>url_for</code>.</p> <p>For example: <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>charset</span><span class=o>=</span><span class=s>&quot;UTF-8&quot;</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Welcome - Ellar ASGI Python Framework<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&quot;shortcut icon&quot;</span> <span class=na>type</span><span class=o>=</span><span class=s>&quot;image/x-icon&quot;</span> <span class=na>href</span><span class=o>=</span><span class=s>&quot;{{ url_for(&#39;static&#39;, path=&#39;img/Icon.svg&#39;) }}&quot;</span><span class=p>/&gt;</span>
    <span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&quot;stylesheet&quot;</span> <span class=na>href</span><span class=o>=</span><span class=s>&quot;{{ url_for(&#39;static&#39;, path=&#39;css/bootstrap.min.css&#39;) }}&quot;</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</code></pre></div></p> <p>The <code>url_for</code> takes <code>path</code> parameter, in the case of <code>static</code> files, to match the <strong>directory</strong> and <strong>filename</strong> to be resolved. This <code>url_for('static', path='img/Icon.svg')</code> will search for <code>img/Icon.svg</code> in all registered static folders.</p> <h3 id=reversing-controllers-urls><strong>Reversing Controllers URLs</strong><a class=headerlink href=#reversing-controllers-urls title="Permanent link">&para;</a></h3> <p>It is common to need to generate URLs for specific routes, particularly when returning a redirect response. This can be achieved by using the <code>request.url_for</code> method in the request object, or in the case of templating, by using the <code>url_for()</code> function.</p> <p>The <code>request.url_for</code> method generates a URL based on the current request context, while in template <code>{{url_for()}}</code> function generates a URL based on the current routing configuration. Both of them will generate a URL for a specific route, allowing the server to redirect the client to the correct location.</p> <p>In controllers, urls are reversed by joining the <strong>controller_name</strong> and <strong>route handler</strong> name like so <code>controller_name:function_name</code>.</p> <p>For example:</p> <div class=highlight><pre><span></span><code><span class=c1># main.py</span>
<span class=kn>import</span> <span class=nn>uvicorn</span>
<span class=kn>from</span> <span class=nn>ellar.app</span> <span class=kn>import</span> <span class=n>AppFactory</span>
<span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>render</span><span class=p>,</span> <span class=n>Controller</span><span class=p>,</span> <span class=n>get</span>
<span class=kn>from</span> <span class=nn>ellar.core</span> <span class=kn>import</span> <span class=n>Request</span>
<span class=kn>from</span> <span class=nn>pathlib</span> <span class=kn>import</span> <span class=n>Path</span>

<span class=n>BASE_DIR</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=vm>__file__</span><span class=p>)</span><span class=o>.</span><span class=n>parent</span>


<span class=nd>@Controller</span><span class=p>()</span>
<span class=k>class</span> <span class=nc>TemplateExampleController</span><span class=p>:</span>
    <span class=nd>@get</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)</span>
    <span class=nd>@render</span><span class=p>()</span>
    <span class=k>async</span> <span class=k>def</span> <span class=nf>index</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>:</span><span class=n>Request</span><span class=p>):</span>
        <span class=k>assert</span> <span class=n>request</span><span class=o>.</span><span class=n>url_for</span><span class=p>(</span><span class=s1>&#39;templateexample:index&#39;</span><span class=p>)</span> <span class=o>==</span> <span class=s1>&#39;http://127.0.0.1:5000/templateexample/&#39;</span>
        <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;Ellar Template&#39;</span><span class=p>}</span>


<span class=n>app</span> <span class=o>=</span> <span class=n>AppFactory</span><span class=o>.</span><span class=n>create_app</span><span class=p>(</span>
    <span class=n>controllers</span><span class=o>=</span><span class=p>[</span><span class=n>TemplateExampleController</span><span class=p>],</span>
    <span class=n>template_folder</span><span class=o>=</span><span class=s1>&#39;templates&#39;</span><span class=p>,</span> <span class=n>base_directory</span><span class=o>=</span><span class=n>BASE_DIR</span>
<span class=p>)</span>

<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&quot;__main__&quot;</span><span class=p>:</span>
    <span class=n>uvicorn</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;main:app&quot;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>5000</span><span class=p>,</span> <span class=n>log_level</span><span class=o>=</span><span class=s2>&quot;info&quot;</span><span class=p>)</span>
</code></pre></div> <p>Then in <code>templates/templateexample/index.html</code> add the follow:</p> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&quot;{{url_for(&#39;templateexample:index&#39;)}}&quot;</span><span class=p>&gt;</span>Index<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</code></pre></div> <p>In the example mentioned, <code>controller_name</code> is combined with <code>function_name</code> to generate the url for the 'index' route.</p> <p>In the same example, URL parameters can also be passed as keyword arguments to the <code>url_for</code> function. For example:</p> <p><div class=highlight><pre><span></span><code>url_for(&#39;templateexample:index&#39;, parameter_a=&#39;value1&#39;, parameter_b=&#39;value2&#39;)
</code></pre></div> This would generate a URL that includes the values of <code>parameter_a</code> and <code>parameter_b</code> as URL parameters, like this :</p> <div class=highlight><pre><span></span><code>example.com/index/value1/value2
</code></pre></div> <p>For instance:</p> <div class=highlight><pre><span></span><code><span class=nd>@get</span><span class=p>(</span><span class=s1>&#39;/</span><span class=si>{parameter_a}</span><span class=s1>/</span><span class=si>{parameter_b}</span><span class=s1>&#39;</span><span class=p>)</span>
<span class=nd>@render</span><span class=p>()</span>
<span class=k>async</span> <span class=k>def</span> <span class=nf>index</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parameter_a</span><span class=p>:</span><span class=nb>str</span><span class=p>,</span> <span class=n>request</span><span class=p>:</span><span class=n>Request</span><span class=p>):</span>
    <span class=k>assert</span> <span class=n>request</span><span class=o>.</span><span class=n>url_for</span><span class=p>(</span><span class=s1>&#39;templateexample:index&#39;</span><span class=p>,</span> <span class=n>parameter_a</span><span class=o>=</span><span class=s1>&#39;ellar&#39;</span><span class=p>)</span> <span class=o>==</span> <span class=s1>&#39;http://127.0.0.1:5000/templateexample/ellar&#39;</span>
    <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;Ellar Template&#39;</span><span class=p>}</span>
</code></pre></div> <p>In the example <code>request.url_for('templateexample:index', parameter_a='ellar')</code>, we can see that the <code>parameter_a</code> is used as a keyword argument to satisfy the dependency on the <code>parameter_a</code> parameter in the URL being generated.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>If the <code>url_for</code> function is called with a path that does not exist or with insufficient parameters to resolve an existing URL, it will raise a <code>starlette.routing.NoMatchFound</code> exception.</p> </div> <h3 id=reversing-module-router-urls><strong>Reversing Module Router URLs</strong><a class=headerlink href=#reversing-module-router-urls title="Permanent link">&para;</a></h3> <p>Just like in controller, we can also reverse URLs that belongs to <code>ModuleRouter</code>. </p> <div class=highlight><pre><span></span><code><span class=c1># main.py</span>
<span class=kn>import</span> <span class=nn>uvicorn</span>
<span class=kn>from</span> <span class=nn>ellar.app</span> <span class=kn>import</span> <span class=n>AppFactory</span>
<span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>ModuleRouter</span>
<span class=kn>from</span> <span class=nn>ellar.core</span> <span class=kn>import</span> <span class=n>Request</span>
<span class=kn>from</span> <span class=nn>pathlib</span> <span class=kn>import</span> <span class=n>Path</span>

<span class=n>BASE_DIR</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=vm>__file__</span><span class=p>)</span><span class=o>.</span><span class=n>parent</span>

<span class=n>router</span> <span class=o>=</span> <span class=n>ModuleRouter</span><span class=p>(</span><span class=s1>&#39;/template-reversing&#39;</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;users&#39;</span><span class=p>)</span>

<span class=nd>@router</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;/</span><span class=si>{user_id}</span><span class=s1>&#39;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>profile</span><span class=p>(</span><span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>request</span><span class=p>:</span><span class=n>Request</span><span class=p>):</span>
    <span class=n>profile_url</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>url_for</span><span class=p>(</span><span class=s1>&#39;users:profile&#39;</span><span class=p>,</span> <span class=n>user_id</span><span class=o>=</span><span class=n>user_id</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>profile_url</span>


<span class=n>app</span> <span class=o>=</span> <span class=n>AppFactory</span><span class=o>.</span><span class=n>create_app</span><span class=p>(</span>
    <span class=n>routers</span><span class=o>=</span><span class=p>[</span><span class=n>router</span><span class=p>],</span>
    <span class=n>template_folder</span><span class=o>=</span><span class=s1>&#39;templates&#39;</span><span class=p>,</span> <span class=n>base_directory</span><span class=o>=</span><span class=n>BASE_DIR</span>
<span class=p>)</span>

<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&quot;__main__&quot;</span><span class=p>:</span>
    <span class=n>uvicorn</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;main:app&quot;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>5000</span><span class=p>,</span> <span class=n>log_level</span><span class=o>=</span><span class=s2>&quot;info&quot;</span><span class=p>)</span>
</code></pre></div> <p>In the example you mentioned, by adding <code>name='users'</code> to the router, it provides a unique way to reverse the routing pattern for the router. We can now use the <strong>name</strong> along with the route <strong>function name</strong> in the form of <code>{name}:{function_name}</code> to resolve the URL. As you can see in <code>request.url_for('users:profile', user_id=user_id)</code> the 'users:profile' is the string passed to the <code>url_for</code> method. This is using the <strong>name</strong> as "users" and the <strong>function name</strong> as "profile" to generate the url based on the routing configuration. The <strong>user_id</strong> parameter is passed as keyword argument which will be used to construct the URL based on the routing configuration, which should include a parameter for <strong>user_id</strong></p> <p>However, If you don't provide a name on the router, you'll have to use only the function name to resolve the URL. For example, <code>request.url_for('profile', user_id=user_id)</code>. In this case, the routing configuration should have a route that match the function name 'profile' and have a parameter for <code>user_id</code> in the routing path.</p> <p>For example:</p> <div class=highlight><pre><span></span><code><span class=n>router</span> <span class=o>=</span> <span class=n>ModuleRouter</span><span class=p>(</span><span class=s1>&#39;/template-reversing&#39;</span><span class=p>)</span>

<span class=nd>@router</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;/</span><span class=si>{user_id}</span><span class=s1>&#39;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>profile</span><span class=p>(</span><span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>request</span><span class=p>:</span><span class=n>Request</span><span class=p>):</span>
    <span class=n>profile_url</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>url_for</span><span class=p>(</span><span class=s1>&#39;profile&#39;</span><span class=p>,</span> <span class=n>user_id</span><span class=o>=</span><span class=n>user_id</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>profile_url</span>
</code></pre></div> <p>It's worth noting that providing a unique name to a router is useful if you have multiple routes with the same function name, or to make the URL reversing more readable or meaningful.</p> <h3 id=overriding-reversing-url-function-name><strong>Overriding Reversing URL Function Name</strong><a class=headerlink href=#overriding-reversing-url-function-name title="Permanent link">&para;</a></h3> <p>You can override the <code>function_name</code> part of reversing the URL by providing a <code>name</code> on the <strong>route method</strong> decorator. Each route method has an optional name parameter, which, when set, is used in place of the function name when reversing the URL. For example, you could have the following code:</p> <div class=highlight><pre><span></span><code><span class=n>router</span> <span class=o>=</span> <span class=n>ModuleRouter</span><span class=p>(</span><span class=s1>&#39;/template-reversing&#39;</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;users&#39;</span><span class=p>)</span>

<span class=nd>@router</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;/profile/</span><span class=si>{user_id}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;user_profile&quot;</span><span class=p>)</span>
<span class=k>async</span> <span class=k>def</span> <span class=nf>profile</span><span class=p>(</span><span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>request</span><span class=p>:</span><span class=n>Request</span><span class=p>):</span>
    <span class=n>profile_url</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>url_for</span><span class=p>(</span><span class=s1>&#39;users:user_profile&#39;</span><span class=p>,</span> <span class=n>user_id</span><span class=o>=</span><span class=n>user_id</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>profile_url</span>
</code></pre></div> <p>In this case, when reversing the URL, you would use <code>request.url_for('users:user_profile', user_id=user_id)</code> which will generate <code>http://127.0.0.1:5000/template-reversing/profile/value_of_user_id</code> based on routing configuration.</p> <p>This allows for greater control and readability when reversing URLs, and makes it less prone to error if the function name of the route were to change in the future.</p> <h3 id=adding-template-filters-and-template-globals><strong>Adding template filters and template globals.</strong><a class=headerlink href=#adding-template-filters-and-template-globals title="Permanent link">&para;</a></h3> <p>Jinja template filter and global functions can be defined at module level as shown here: <a href=../../overview/modules/#module-templating-filters target=_blank>Module Templating Filters</a></p> <h2 id=templating-context><strong>Templating Context</strong><a class=headerlink href=#templating-context title="Permanent link">&para;</a></h2> <p>A context processor is a function that returns a dictionary, which is then merged into the template context. Each function accepts only one argument, the request, and must return a dictionary to be added to the context.</p> <p>A common use of context processors is to extend the template context with shared variables.</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>typing</span>
<span class=kn>from</span> <span class=nn>starlette.requests</span> <span class=kn>import</span> <span class=n>Request</span>

<span class=k>def</span> <span class=nf>app_context</span><span class=p>(</span><span class=n>request</span><span class=p>:</span> <span class=n>Request</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>typing</span><span class=o>.</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>typing</span><span class=o>.</span><span class=n>Any</span><span class=p>]:</span>
    <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;app&#39;</span><span class=p>:</span> <span class=n>request</span><span class=o>.</span><span class=n>app</span><span class=p>}</span>
</code></pre></div> <h3 id=registering-context-templates><strong>Registering context templates</strong><a class=headerlink href=#registering-context-templates title="Permanent link">&para;</a></h3> <div class="tabbed-set tabbed-alternate" data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>in config.py</label><label for=__tabbed_1_2>in @Module() class</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>In the case of <code>app_context</code>, we can register it by adding to the <code>config.py</code> <code>TEMPLATES_CONTEXT_PROCESSORS</code></p> <p>for example:</p> <div class=highlight><pre><span></span><code><span class=c1># project_name/config.py</span>

<span class=kn>from</span> <span class=nn>ellar.core</span> <span class=kn>import</span> <span class=n>ConfigDefaultTypesMixin</span>
<span class=kn>from</span> <span class=nn>path</span><span class=o>/</span><span class=n>to</span><span class=o>/</span><span class=n>context</span> <span class=kn>import</span> <span class=nn>app_context</span>

<span class=k>class</span> <span class=nc>DevelopmentConfig</span><span class=p>(</span><span class=n>ConfigDefaultTypesMixin</span><span class=p>):</span>
    <span class=n>TEMPLATES_CONTEXT_PROCESSORS</span><span class=p>:</span> <span class=n>t</span><span class=o>.</span><span class=n>List</span><span class=p>[</span><span class=n>t</span><span class=o>.</span><span class=n>Callable</span><span class=p>[[</span><span class=n>t</span><span class=o>.</span><span class=n>Union</span><span class=p>[</span><span class=n>Request</span><span class=p>,</span> <span class=n>HTTPConnection</span><span class=p>]],</span> <span class=n>t</span><span class=o>.</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>t</span><span class=o>.</span><span class=n>Any</span><span class=p>]]]</span> <span class=o>=</span> <span class=p>[</span>
        <span class=s2>&quot;ellar.core.templating.context_processors:request_context&quot;</span><span class=p>,</span>
        <span class=s2>&quot;ellar.core.templating.context_processors:user&quot;</span><span class=p>,</span>
        <span class=s2>&quot;ellar.core.templating.context_processors:request_state&quot;</span><span class=p>,</span>
        <span class=n>app_context</span>
        <span class=c1>## OR</span>
        <span class=s2>&quot;path/to/context:app_context&quot;</span>
    <span class=p>]</span>
</code></pre></div> </div> <div class=tabbed-block> <p>@Module() classes can define template contexts that will be automatically registered to config.TEMPLATES_CONTEXT_PROCESSORS at runtime</p> <p>for example:</p> <div class=highlight><pre><span></span><code><span class=c1># project_name/root_module.py</span>
<span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>Module</span><span class=p>,</span> <span class=n>template_context</span>
<span class=kn>from</span> <span class=nn>ellar.core</span> <span class=kn>import</span> <span class=n>Request</span>


<span class=nd>@Module</span><span class=p>()</span>
<span class=k>class</span> <span class=nc>ApplicationModule</span><span class=p>:</span>
    <span class=nd>@template_context</span><span class=p>()</span>
    <span class=k>def</span> <span class=nf>app_context</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>:</span> <span class=n>Request</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;app&#39;</span><span class=p>:</span> <span class=n>request</span><span class=o>.</span><span class=n>app</span><span class=p>}</span>
</code></pre></div> </div> </div> </div> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">August 18, 2024</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../caching/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Caching"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Caching </div> </div> </a> <a href=../staticfiles/ class="md-footer__link md-footer__link--next" aria-label="Next: Static Files"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Static Files </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 <a href=https://github.com/eadwinCode target=_blank rel=noopener>Eadwin Ezeudoh</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "search.highlight", "search.share", "search.suggest", "toc.follow", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.prune", "navigation.tabs", "navigation.left", "navigation.tracking"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.88dd0f4e.min.js></script> </body> </html>