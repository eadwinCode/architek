<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Ellar - Python ASGI web framework for building fast, efficient and scalable RESTAPIs and server-side application."><link href=https://github.com/python-ellar/ellar/overview/modules/ rel=canonical><link href=../providers/ rel=prev><link href=../middleware/ rel=next><link rel=icon href=../../img/Icon.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.49"><title>Modules -</title><link rel=stylesheet href=../../assets/stylesheets/main.6f8fc17f.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Source Sans Pro";--md-code-font:"Fira Code"}</style><link rel=stylesheet href=../../assets/_mkdocstrings.css><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=pink data-md-color-accent=pink> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#modules class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title class="md-header__button md-logo" aria-label data-md-component=logo> <img src=../../img/EllarLogoB.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Modules </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=pink data-md-color-accent=pink aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=pink data-md-color-accent=pink aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/python-ellar/ellar title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> eadwinCode/ellar </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Get Started </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../step-one/ class=md-tabs__link> Overview </a> </li> <li class=md-tabs__item> <a href=../../basics/execution-context/ class=md-tabs__link> Essentials </a> </li> <li class=md-tabs__item> <a href=../../techniques/configurations/ class=md-tabs__link> Techniques </a> </li> <li class=md-tabs__item> <a href=../../security/authentication/guard-strategy/ class=md-tabs__link> Security </a> </li> <li class=md-tabs__item> <a href=../../cli/introduction/ class=md-tabs__link> CLI </a> </li> <li class=md-tabs__item> <a href=../../openapi/ class=md-tabs__link> OPENAPI </a> </li> <li class=md-tabs__item> <a href=../../websockets/websockets/ class=md-tabs__link> WebSockets </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title class="md-nav__button md-logo" aria-label data-md-component=logo> <img src=../../img/EllarLogoB.png alt=logo> </a> </label> <div class=md-nav__source> <a href=https://github.com/python-ellar/ellar title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> eadwinCode/ellar </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Get Started </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Overview </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Overview </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../step-one/ class=md-nav__link> <span class=md-ellipsis> Step One </span> </a> </li> <li class=md-nav__item> <a href=../controllers/ class=md-nav__link> <span class=md-ellipsis> Controllers </span> </a> </li> <li class=md-nav__item> <a href=../providers/ class=md-nav__link> <span class=md-ellipsis> Providers </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Modules </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Modules </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#feature-modules class=md-nav__link> <span class=md-ellipsis> Feature modules </span> </a> </li> <li class=md-nav__item> <a href=#module-parameters class=md-nav__link> <span class=md-ellipsis> Module Parameters </span> </a> </li> <li class=md-nav__item> <a href=#additional-module-configurations class=md-nav__link> <span class=md-ellipsis> Additional Module Configurations </span> </a> <nav class=md-nav aria-label="Additional Module Configurations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#module-events class=md-nav__link> <span class=md-ellipsis> Module Events </span> </a> </li> <li class=md-nav__item> <a href=#module-application-cycle class=md-nav__link> <span class=md-ellipsis> Module Application Cycle </span> </a> </li> <li class=md-nav__item> <a href=#module-exceptions class=md-nav__link> <span class=md-ellipsis> Module Exceptions </span> </a> </li> <li class=md-nav__item> <a href=#module-templating-filters class=md-nav__link> <span class=md-ellipsis> Module Templating Filters </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#dependency-injection class=md-nav__link> <span class=md-ellipsis> Dependency Injection </span> </a> </li> <li class=md-nav__item> <a href=#module-middleware class=md-nav__link> <span class=md-ellipsis> Module Middleware </span> </a> </li> <li class=md-nav__item> <a href=#injector-module class=md-nav__link> <span class=md-ellipsis> Injector Module </span> </a> </li> <li class=md-nav__item> <a href=#forwardrefmodule class=md-nav__link> <span class=md-ellipsis> ForwardRefModule </span> </a> <nav class=md-nav aria-label=ForwardRefModule> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-problem-does-it-solve class=md-nav__link> <span class=md-ellipsis> What problem does it solve? </span> </a> </li> <li class=md-nav__item> <a href=#forward-reference-by-class class=md-nav__link> <span class=md-ellipsis> Forward Reference by Class </span> </a> </li> <li class=md-nav__item> <a href=#forward-reference-by-name class=md-nav__link> <span class=md-ellipsis> Forward Reference by Name </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../middleware/ class=md-nav__link> <span class=md-ellipsis> Middlewares </span> </a> </li> <li class=md-nav__item> <a href=../exception_handling/ class=md-nav__link> <span class=md-ellipsis> Exception Handling </span> </a> </li> <li class=md-nav__item> <a href=../guards/ class=md-nav__link> <span class=md-ellipsis> Guards </span> </a> </li> <li class=md-nav__item> <a href=../custom_decorators/ class=md-nav__link> <span class=md-ellipsis> Custom Decorators </span> </a> </li> <li class=md-nav__item> <a href=../module-router/ class=md-nav__link> <span class=md-ellipsis> Module Router </span> </a> </li> <li class=md-nav__item> <a href=../interceptors/ class=md-nav__link> <span class=md-ellipsis> Interceptors </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../basics/execution-context/ class=md-nav__link> <span class=md-ellipsis> Essentials </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../techniques/configurations/ class=md-nav__link> <span class=md-ellipsis> Techniques </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../security/authentication/guard-strategy/ class=md-nav__link> <span class=md-ellipsis> Security </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../cli/introduction/ class=md-nav__link> <span class=md-ellipsis> CLI </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../openapi/ class=md-nav__link> <span class=md-ellipsis> OPENAPI </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../websockets/websockets/ class=md-nav__link> <span class=md-ellipsis> WebSockets </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#feature-modules class=md-nav__link> <span class=md-ellipsis> Feature modules </span> </a> </li> <li class=md-nav__item> <a href=#module-parameters class=md-nav__link> <span class=md-ellipsis> Module Parameters </span> </a> </li> <li class=md-nav__item> <a href=#additional-module-configurations class=md-nav__link> <span class=md-ellipsis> Additional Module Configurations </span> </a> <nav class=md-nav aria-label="Additional Module Configurations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#module-events class=md-nav__link> <span class=md-ellipsis> Module Events </span> </a> </li> <li class=md-nav__item> <a href=#module-application-cycle class=md-nav__link> <span class=md-ellipsis> Module Application Cycle </span> </a> </li> <li class=md-nav__item> <a href=#module-exceptions class=md-nav__link> <span class=md-ellipsis> Module Exceptions </span> </a> </li> <li class=md-nav__item> <a href=#module-templating-filters class=md-nav__link> <span class=md-ellipsis> Module Templating Filters </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#dependency-injection class=md-nav__link> <span class=md-ellipsis> Dependency Injection </span> </a> </li> <li class=md-nav__item> <a href=#module-middleware class=md-nav__link> <span class=md-ellipsis> Module Middleware </span> </a> </li> <li class=md-nav__item> <a href=#injector-module class=md-nav__link> <span class=md-ellipsis> Injector Module </span> </a> </li> <li class=md-nav__item> <a href=#forwardrefmodule class=md-nav__link> <span class=md-ellipsis> ForwardRefModule </span> </a> <nav class=md-nav aria-label=ForwardRefModule> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-problem-does-it-solve class=md-nav__link> <span class=md-ellipsis> What problem does it solve? </span> </a> </li> <li class=md-nav__item> <a href=#forward-reference-by-class class=md-nav__link> <span class=md-ellipsis> Forward Reference by Class </span> </a> </li> <li class=md-nav__item> <a href=#forward-reference-by-name class=md-nav__link> <span class=md-ellipsis> Forward Reference by Name </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/python-ellar/ellar/blob/master/docs/overview/modules.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <a href=https://github.com/python-ellar/ellar/raw/master/docs/overview/modules.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg> </a> <h1 id=modules><strong>Modules</strong><a class=headerlink href=#modules title="Permanent link">&para;</a></h1> <p>A <strong>module</strong> in Ellar is essentially a class marked with the <code>@Module()</code> decorator. This simple yet powerful annotation serves as the cornerstone of defining the architecture and organization of an application.</p> <p><img alt="Middleware Description" src=../../img/ModuleDescription.png></p> <p>Embracing the modular approach, each module encapsulates a specific set of functionalities, ensuring a clear separation of concerns within the application. The <code>ApplicationModule</code> typically acts as the root module, orchestrating the composition of various submodules.</p> <p>This modular structure enables efficient management of dependencies, promotes code reusability, and enhances maintainability by facilitating clear boundaries between different components of the application. By structuring the application into modules, developers can easily reason about the codebase, foster collaboration among team members, and scale the application seamlessly.</p> <h2 id=feature-modules><strong>Feature modules</strong><a class=headerlink href=#feature-modules title="Permanent link">&para;</a></h2> <p>Developing an application as a collection of feature modules grouped together offers several advantages. It helps in managing complexity, maintains a codebase that is both extendable and testable, and promotes adherence to SOLID principles.</p> <p>A prime example of a feature module is the <strong>car</strong> project. In this project, the <code>CarModule</code> encapsulates all the services and controllers responsible for handling the <code>car</code> resource. This modular structure simplifies maintenance, extension, and testing of the codebase.</p> <div class=highlight><pre><span></span><code><span class=c1># project_name/apps/car/module.py</span>

<span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>Module</span>
<span class=kn>from</span> <span class=nn>ellar.core</span> <span class=kn>import</span> <span class=n>ModuleBase</span>
<span class=kn>from</span> <span class=nn>ellar.di</span> <span class=kn>import</span> <span class=n>Container</span>
<span class=kn>from</span> <span class=nn>.services</span> <span class=kn>import</span> <span class=n>CarRepository</span>
<span class=kn>from</span> <span class=nn>.controllers</span> <span class=kn>import</span> <span class=n>CarController</span>


<span class=nd>@Module</span><span class=p>(</span>
    <span class=n>controllers</span><span class=o>=</span><span class=p>[</span><span class=n>CarController</span><span class=p>],</span>
    <span class=n>providers</span><span class=o>=</span><span class=p>[</span><span class=n>CarRepository</span><span class=p>],</span>
<span class=p>)</span>
<span class=k>class</span> <span class=nc>CarModule</span><span class=p>(</span><span class=n>ModuleBase</span><span class=p>):</span>
    <span class=k>pass</span>
</code></pre></div> <h2 id=module-parameters><strong>Module Parameters</strong><a class=headerlink href=#module-parameters title="Permanent link">&para;</a></h2> <p>Let's create a Module and take a quick overview of its parameters.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>Module</span>
<span class=kn>from</span> <span class=nn>ellar.core</span> <span class=kn>import</span> <span class=n>ModuleBase</span>

<span class=nd>@Module</span><span class=p>(</span>
    <span class=n>name</span><span class=o>=</span><span class=s1>&#39;&#39;</span><span class=p>,</span> 
    <span class=n>modules</span><span class=o>=</span><span class=p>[],</span> 
    <span class=n>providers</span><span class=o>=</span><span class=p>[],</span>
    <span class=n>controllers</span><span class=o>=</span><span class=p>[],</span>
    <span class=n>exports</span><span class=o>=</span><span class=p>[],</span>
    <span class=n>routers</span><span class=o>=</span><span class=p>[],</span>
    <span class=n>commands</span><span class=o>=</span><span class=p>[],</span>
    <span class=n>base_directory</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> 
    <span class=n>static_folder</span><span class=o>=</span><span class=s1>&#39;static&#39;</span><span class=p>,</span> 
    <span class=n>template_folder</span><span class=o>=</span><span class=s1>&#39;templates&#39;</span>
<span class=p>)</span>
<span class=k>class</span> <span class=nc>BookModule</span><span class=p>(</span><span class=n>ModuleBase</span><span class=p>):</span>
    <span class=k>pass</span>
</code></pre></div> <table> <thead> <tr> <th>Parameter</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>name</code></td> <td>The name of the module. It's relevant for identification purposes.</td> </tr> <tr> <td><code>modules</code></td> <td>A list of dependencies required by this module.</td> </tr> <tr> <td><code>providers</code></td> <td>Providers to be instantiated by the Ellar injector, possibly shared across this module.</td> </tr> <tr> <td><code>exports</code></td> <td>List of services accessible at application scope level.</td> </tr> <tr> <td><code>controllers</code></td> <td>Controllers defined in this module that need instantiation.</td> </tr> <tr> <td><code>routers</code></td> <td>ModuleRouters defined in this module.</td> </tr> <tr> <td><code>commands</code></td> <td>Functions decorated with <code>EllarTyper</code> or <code>command</code> that serve as commands.</td> </tr> <tr> <td><code>base_directory</code></td> <td>The root directory for this module, used to locate <code>static_folder</code> and <code>template_folder</code>. Default is the module's root.</td> </tr> <tr> <td><code>static_folder</code></td> <td>The folder for static files within this module. Default is 'static'.</td> </tr> <tr> <td><code>template_folder</code></td> <td>The folder for templates within this module. Default is 'templates'.</td> </tr> </tbody> </table> <h2 id=additional-module-configurations><strong>Additional Module Configurations</strong><a class=headerlink href=#additional-module-configurations title="Permanent link">&para;</a></h2> <p>The Ellar framework offers additional module configurations to handle various aspects of the application lifecycle and behavior.</p> <h3 id=module-events>Module Events<a class=headerlink href=#module-events title="Permanent link">&para;</a></h3> <p>Modules can define <code>post_build</code> class method can be used to define additional <code>Module</code> properties after <code>Module</code> has built successfully.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>Module</span>
<span class=kn>from</span> <span class=nn>ellar.core.modules</span> <span class=kn>import</span> <span class=n>ModuleBase</span><span class=p>,</span> <span class=n>ModuleRefBase</span>


<span class=nd>@Module</span><span class=p>()</span>
<span class=k>class</span> <span class=nc>ModuleEventSample</span><span class=p>(</span><span class=n>ModuleBase</span><span class=p>):</span>
    <span class=nd>@classmethod</span>
    <span class=k>def</span> <span class=nf>post_build</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>module_ref</span><span class=p>:</span> <span class=n>ModuleRefBase</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Executed after a module build process is done&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div> <h3 id=module-application-cycle>Module Application Cycle<a class=headerlink href=#module-application-cycle title="Permanent link">&para;</a></h3> <p>Ellar follows a two-phase application lifecycle with <code>on_startup</code> and <code>on_shutdown</code> events managed by <code>EllarApplicationLifespan</code>.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>Module</span><span class=p>,</span> <span class=n>IApplicationShutdown</span><span class=p>,</span> <span class=n>IApplicationStartup</span>
<span class=kn>from</span> <span class=nn>ellar.core</span> <span class=kn>import</span> <span class=n>ModuleBase</span>

<span class=nd>@Module</span><span class=p>()</span>
<span class=k>class</span> <span class=nc>AModuleSample</span><span class=p>(</span><span class=n>ModuleBase</span><span class=p>,</span> <span class=n>IApplicationStartup</span><span class=p>):</span>
    <span class=k>async</span> <span class=k>def</span> <span class=nf>on_startup</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>app</span><span class=p>:</span> <span class=s2>&quot;App&quot;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>pass</span>

<span class=nd>@Module</span><span class=p>()</span>
<span class=k>class</span> <span class=nc>BModuleSample</span><span class=p>(</span><span class=n>ModuleBase</span><span class=p>,</span> <span class=n>IApplicationShutdown</span><span class=p>):</span>
    <span class=k>async</span> <span class=k>def</span> <span class=nf>on_shutdown</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>pass</span>

<span class=nd>@Module</span><span class=p>()</span>
<span class=k>class</span> <span class=nc>CModuleSample</span><span class=p>(</span><span class=n>ModuleBase</span><span class=p>,</span> <span class=n>IApplicationStartup</span><span class=p>,</span> <span class=n>IApplicationShutdown</span><span class=p>):</span>
    <span class=k>async</span> <span class=k>def</span> <span class=nf>on_startup</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>app</span><span class=p>:</span> <span class=s2>&quot;App&quot;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>pass</span>

    <span class=k>async</span> <span class=k>def</span> <span class=nf>on_shutdown</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>pass</span>
</code></pre></div> <h3 id=module-exceptions>Module Exceptions<a class=headerlink href=#module-exceptions title="Permanent link">&para;</a></h3> <p>Modules can register custom exception handlers for specific HTTP error codes.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>Module</span><span class=p>,</span> <span class=n>exception_handler</span><span class=p>,</span> <span class=n>JSONResponse</span><span class=p>,</span> <span class=n>Response</span><span class=p>,</span> <span class=n>IHostContext</span>
<span class=kn>from</span> <span class=nn>ellar.core</span> <span class=kn>import</span> <span class=n>ModuleBase</span>

<span class=nd>@Module</span><span class=p>()</span>
<span class=k>class</span> <span class=nc>ModuleExceptionSample</span><span class=p>(</span><span class=n>ModuleBase</span><span class=p>):</span>
    <span class=nd>@exception_handler</span><span class=p>(</span><span class=mi>404</span><span class=p>)</span>
    <span class=k>def</span> <span class=nf>exception_404_handler</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=n>IHostContext</span><span class=p>,</span> <span class=n>exc</span><span class=p>:</span> <span class=ne>Exception</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Response</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>JSONResponse</span><span class=p>(</span><span class=nb>dict</span><span class=p>(</span><span class=n>detail</span><span class=o>=</span><span class=s2>&quot;Resource not found.&quot;</span><span class=p>))</span>
</code></pre></div></td></tr></table></div> <h3 id=module-templating-filters>Module Templating Filters<a class=headerlink href=#module-templating-filters title="Permanent link">&para;</a></h3> <p>Define Jinja2 templating filters within modules, which are then added to the Jinja2 environment instance during template loading.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>Module</span><span class=p>,</span> <span class=n>template_global</span><span class=p>,</span> <span class=n>template_filter</span>
<span class=kn>from</span> <span class=nn>ellar.core</span> <span class=kn>import</span> <span class=n>ModuleBase</span>

<span class=nd>@Module</span><span class=p>()</span>
<span class=k>class</span> <span class=nc>ModuleTemplateFilterSample</span><span class=p>(</span><span class=n>ModuleBase</span><span class=p>):</span>
    <span class=nd>@template_filter</span><span class=p>()</span>
    <span class=k>def</span> <span class=nf>double_filter</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>n</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>n</span> <span class=o>*</span> <span class=mi>2</span>

    <span class=nd>@template_global</span><span class=p>()</span>
    <span class=k>def</span> <span class=nf>double_global</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>n</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>n</span> <span class=o>*</span> <span class=mi>2</span>

    <span class=nd>@template_filter</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&quot;dec_filter&quot;</span><span class=p>)</span>
    <span class=k>def</span> <span class=nf>double_filter_dec</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>n</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>n</span> <span class=o>*</span> <span class=mi>2</span>
</code></pre></div> <p>These configurations enhance the flexibility and functionality of Ellar modules, allowing for greater control over application behavior and lifecycle events.</p> <h2 id=dependency-injection><strong>Dependency Injection</strong><a class=headerlink href=#dependency-injection title="Permanent link">&para;</a></h2> <p>A module class can inject providers, such as configuration objects, for various purposes. Let's consider an example from our sample project where we inject <code>Config</code> into the <code>CarModule</code>.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span></pre></div></td><td class=code><div><pre><span></span><code><span class=c1># project_name/apps/car/module.py</span>

<span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>Module</span>
<span class=kn>from</span> <span class=nn>ellar.core</span> <span class=kn>import</span> <span class=n>Config</span><span class=p>,</span> <span class=n>ModuleBase</span>
<span class=kn>from</span> <span class=nn>ellar.di</span> <span class=kn>import</span> <span class=n>Container</span>
<span class=kn>from</span> <span class=nn>.services</span> <span class=kn>import</span> <span class=n>CarRepository</span>
<span class=kn>from</span> <span class=nn>.controllers</span> <span class=kn>import</span> <span class=n>CarController</span>


<span class=nd>@Module</span><span class=p>(</span>
    <span class=n>controllers</span><span class=o>=</span><span class=p>[</span><span class=n>CarController</span><span class=p>],</span>
    <span class=n>providers</span><span class=o>=</span><span class=p>[</span><span class=n>CarRepository</span><span class=p>],</span>
<span class=p>)</span>
<span class=k>class</span> <span class=nc>CarModule</span><span class=p>(</span><span class=n>ModuleBase</span><span class=p>):</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>config</span><span class=p>:</span> <span class=n>Config</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>config</span> <span class=o>=</span> <span class=n>config</span>
</code></pre></div></td></tr></table></div> <p>In this example, the <code>CarModule</code> class accepts a <code>Config</code> object in its constructor. This allows us to access configuration parameters within the module. </p> <h2 id=module-middleware><strong>Module Middleware</strong><a class=headerlink href=#module-middleware title="Permanent link">&para;</a></h2> <p>Middleware functions can be defined at the module level using the <code>@middleware()</code> function decorator. Let's illustrate this with an example:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>Module</span><span class=p>,</span> <span class=n>middleware</span><span class=p>,</span> <span class=n>IHostContext</span><span class=p>,</span> <span class=n>PlainTextResponse</span>
<span class=kn>from</span> <span class=nn>ellar.core</span> <span class=kn>import</span> <span class=n>ModuleBase</span>


<span class=nd>@Module</span><span class=p>()</span>
<span class=k>class</span> <span class=nc>ModuleMiddlewareSample</span><span class=p>(</span><span class=n>ModuleBase</span><span class=p>):</span>
    <span class=nd>@middleware</span><span class=p>()</span>
    <span class=k>async</span> <span class=k>def</span> <span class=nf>my_middleware_function_1</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=n>IHostContext</span><span class=p>,</span> <span class=n>call_next</span><span class=p>):</span>
        <span class=n>request</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>switch_to_http_connection</span><span class=p>()</span><span class=o>.</span><span class=n>get_request</span><span class=p>()</span> <span class=c1># for HTTP response only</span>
        <span class=n>request</span><span class=o>.</span><span class=n>state</span><span class=o>.</span><span class=n>my_middleware_function_1</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=k>await</span> <span class=n>call_next</span><span class=p>()</span>

    <span class=nd>@middleware</span><span class=p>()</span>
    <span class=k>async</span> <span class=k>def</span> <span class=nf>my_middleware_function_2</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=n>IHostContext</span><span class=p>,</span> <span class=n>call_next</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>context</span><span class=o>.</span><span class=n>get_type</span><span class=p>()</span> <span class=o>==</span> <span class=s1>&#39;websocket&#39;</span><span class=p>:</span>
            <span class=n>websocket</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>switch_to_websocket</span><span class=p>()</span><span class=o>.</span><span class=n>get_client</span><span class=p>()</span>
            <span class=n>websocket</span><span class=o>.</span><span class=n>state</span><span class=o>.</span><span class=n>my_middleware_function_2</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=k>await</span> <span class=n>call_next</span><span class=p>()</span>

    <span class=nd>@middleware</span><span class=p>()</span>
    <span class=k>async</span> <span class=k>def</span> <span class=nf>my_middleware_function_3</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=n>IHostContext</span><span class=p>,</span> <span class=n>call_next</span><span class=p>):</span>
        <span class=n>connection</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>switch_to_http_connection</span><span class=p>()</span><span class=o>.</span><span class=n>get_client</span><span class=p>()</span> <span class=c1># for HTTP response only</span>
        <span class=k>if</span> <span class=n>connection</span><span class=o>.</span><span class=n>headers</span><span class=p>[</span><span class=s1>&#39;somekey&#39;</span><span class=p>]:</span>
            <span class=c1># response = context.get_response() -&gt; use the `response` to add extra definitions to things you want to see on</span>
            <span class=k>return</span> <span class=n>PlainTextResponse</span><span class=p>(</span><span class=s1>&#39;Header is not allowed.&#39;</span><span class=p>)</span>
        <span class=k>await</span> <span class=n>call_next</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> <p>Key points to remember: - Middleware functions must be asynchronous (<code>async</code>). - Middleware functions can return a response or modify a response returned. - Middleware functions must call <code>call_next()</code> and await its actions as demonstrated above.</p> <h2 id=injector-module><strong>Injector Module</strong><a class=headerlink href=#injector-module title="Permanent link">&para;</a></h2> <p>The <code>EllarInjector</code> module, built on top of the Python library <code>injector</code>, offers similar features to the <code>injector</code> library, with some additional capabilities. One such feature is the ability to create or reuse modules from <code>injector</code> Modules for configuring bindings and providers for dependency injection.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kn>from</span> <span class=nn>ellar.core</span> <span class=kn>import</span> <span class=n>ModuleBase</span>
<span class=kn>from</span> <span class=nn>ellar.di</span> <span class=kn>import</span> <span class=n>Container</span>
<span class=kn>from</span> <span class=nn>injector</span> <span class=kn>import</span> <span class=n>provider</span>


<span class=k>class</span> <span class=nc>Name</span><span class=p>(</span><span class=nb>str</span><span class=p>):</span>
    <span class=k>pass</span>


<span class=k>class</span> <span class=nc>Description</span><span class=p>(</span><span class=nb>str</span><span class=p>):</span>
    <span class=k>pass</span>


<span class=k>class</span> <span class=nc>ExampleModule</span><span class=p>(</span><span class=n>ModuleBase</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>register_services</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>container</span><span class=p>:</span> <span class=n>Container</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>container</span><span class=o>.</span><span class=n>bind</span><span class=p>(</span><span class=n>Name</span><span class=p>,</span> <span class=n>to</span><span class=o>=</span><span class=s1>&#39;Sherlock&#39;</span><span class=p>)</span>

    <span class=nd>@provider</span>
    <span class=k>def</span> <span class=nf>describe</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=n>Name</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Description</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>Description</span><span class=p>(</span><span class=s1>&#39;</span><span class=si>%s</span><span class=s1> is a man of astounding insight&#39;</span> <span class=o>%</span> <span class=n>name</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <p>In this example, the <code>ExampleModule</code> registers the <code>Description</code> and <code>Name</code> types with the injector. These can then be resolved if required by any object in the application.</p> <p>For more details on the use cases of the <code>injector</code> module, you can refer to the documentation <a href=https://injector.readthedocs.io/en/latest/terminology.html#module>here</a>.</p> <h2 id=forwardrefmodule><strong>ForwardRefModule</strong><a class=headerlink href=#forwardrefmodule title="Permanent link">&para;</a></h2> <p><code>ForwardRefModule</code> is a powerful feature that allows you to reference a <code>@Module()</code> class in your application without needing to instantiate or configure it directly at the point of reference. </p> <p>This is particularly useful in scenarios where you have circular dependencies between modules or when you want to declare dependencies without tightly coupling your modules.</p> <h4 id=what-problem-does-it-solve>What problem does it solve?<a class=headerlink href=#what-problem-does-it-solve title="Permanent link">&para;</a></h4> <p>Let's consider an example where we have two modules, <code>ModuleA</code> and <code>ModuleB</code>. <code>ModuleB</code> depends on a service/provider, which is exported, from <code>ModuleA</code> and <code>ModuleB</code> does not want to instantiate <code>ModuleA</code> directly but rather reference its existing instance from the application scope. <code>ModuleB</code> can use <code>ForwardRefModule</code> to declare the <code>ModuleA</code> as a dependency. And <code>ModuleA</code> can be setup differently in any random order.</p> <p>A typical example is a <code>CustomModule</code> that depends on <code>JWTModule</code> to sign the JWT tokens. The <code>CustomModule</code> would declare <code>JWTModule</code> as a dependency using <code>ForwardRefModule</code> and <code>JWTModule</code> can be configured separately in <code>ApplicationModule</code>.</p> <p><div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>Module</span>
<span class=kn>from</span> <span class=nn>ellar.core</span> <span class=kn>import</span> <span class=n>ModuleBase</span><span class=p>,</span> <span class=n>ForwardRefModule</span>
<span class=kn>from</span> <span class=nn>ellar_jwt</span> <span class=kn>import</span> <span class=n>JWTModule</span><span class=p>,</span> <span class=n>JWTService</span>


<span class=nd>@Module</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&quot;CustomModule&quot;</span><span class=p>,</span> <span class=n>modules</span><span class=o>=</span><span class=p>[</span><span class=n>ForwardRefModule</span><span class=p>(</span><span class=n>JWTModule</span><span class=p>)])</span>
<span class=k>class</span> <span class=nc>CustomModule</span><span class=p>(</span><span class=n>ModuleBase</span><span class=p>):</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>jwt_service</span><span class=p>:</span> <span class=n>JWTService</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>jwt_service</span> <span class=o>=</span> <span class=n>jwt_service</span>
        <span class=k>assert</span> <span class=bp>self</span><span class=o>.</span><span class=n>jwt_service</span>


<span class=nd>@Module</span><span class=p>(</span><span class=n>modules</span><span class=o>=</span><span class=p>[</span>
    <span class=n>CustomModule</span><span class=p>,</span> 
    <span class=n>JWTModule</span><span class=o>.</span><span class=n>setup</span><span class=p>(</span><span class=n>secret_key</span><span class=o>=</span><span class=s2>&quot;super-secret&quot;</span><span class=p>)</span>
<span class=p>])</span>
<span class=k>class</span> <span class=nc>ApplicationModule</span><span class=p>(</span><span class=n>ModuleBase</span><span class=p>):</span>
    <span class=k>pass</span>
</code></pre></div> The <code>JWTModule</code> provides <code>JWTService</code> which is injected into <code>CustomModule</code>. By declaring <code>ForwardRefModule(JWTModule)</code> in <code>CustomModule</code>, the <code>JWTService</code> will be properly resolved during instantiation of <code>CustomModule</code>, regardless of the order in which the modules are configured in the application.</p> <p>This pattern is particularly useful when: - You want to avoid direct module instantiation - You need to configure a module differently in different parts of your application - You want to maintain loose coupling between modules</p> <h3 id=forward-reference-by-class>Forward Reference by Class<a class=headerlink href=#forward-reference-by-class title="Permanent link">&para;</a></h3> <p>In the following example, we have two modules, <code>ModuleA</code> and <code>ModuleB</code>. <code>ModuleB</code> needs to reference <code>ModuleA</code> as a dependency, but instead of instantiating <code>ModuleA</code> directly, it uses <code>ForwardRefModule</code> to declare the dependency.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>Module</span>
<span class=kn>from</span> <span class=nn>ellar.core.modules</span> <span class=kn>import</span> <span class=n>ForwardRefModule</span><span class=p>,</span> <span class=n>ModuleBase</span><span class=p>,</span> <span class=n>ModuleRefBase</span>

<span class=nd>@Module</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&quot;moduleA&quot;</span><span class=p>)</span>
<span class=k>class</span> <span class=nc>ModuleA</span><span class=p>:</span>
    <span class=k>pass</span>


<span class=nd>@Module</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&quot;ModuleB&quot;</span><span class=p>,</span> <span class=n>modules</span><span class=o>=</span><span class=p>[</span><span class=n>ForwardRefModule</span><span class=p>(</span><span class=n>ModuleA</span><span class=p>)])</span>
<span class=k>class</span> <span class=nc>ModuleB</span><span class=p>(</span><span class=n>ModuleBase</span><span class=p>):</span>
    <span class=nd>@classmethod</span>
    <span class=k>def</span> <span class=nf>post_build</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>module_ref</span><span class=p>:</span> <span class=n>ModuleRefBase</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>assert</span> <span class=n>ModuleA</span> <span class=ow>in</span> <span class=n>module_ref</span><span class=o>.</span><span class=n>modules</span>


<span class=nd>@Module</span><span class=p>(</span><span class=n>modules</span><span class=o>=</span><span class=p>[</span><span class=n>ModuleA</span><span class=p>,</span> <span class=n>ModuleB</span><span class=p>])</span>
<span class=k>class</span> <span class=nc>ApplicationModule</span><span class=p>(</span><span class=n>ModuleBase</span><span class=p>):</span>
    <span class=k>pass</span>
</code></pre></div> <p>In this example: - <code>ModuleB</code> references <code>ModuleA</code> using <code>ForwardRefModule</code>, meaning <code>ModuleB</code> knows about <code>ModuleA</code> but doesn't instantiate it. - When <code>ApplicationModule</code> is built, both <code>ModuleA</code> and <code>ModuleB</code> are instantiated. During this build process, <code>ModuleB</code> can reference the instance of <code>ModuleA</code>, ensuring that all dependencies are resolved properly.</p> <p>This pattern is particularly useful when modules need to reference each other, creating a situation where they might otherwise be instantiated out of order or cause circular dependencies.</p> <h3 id=forward-reference-by-name>Forward Reference by Name<a class=headerlink href=#forward-reference-by-name title="Permanent link">&para;</a></h3> <p><code>ForwardRefModule</code> also supports referencing a module by its name, allowing for even more flexibility. This is beneficial when module classes are defined in separate files or when the module class may not be available at the time of reference.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>ellar.common</span> <span class=kn>import</span> <span class=n>Module</span>
<span class=kn>from</span> <span class=nn>ellar.core.modules</span> <span class=kn>import</span> <span class=n>ForwardRefModule</span><span class=p>,</span> <span class=n>ModuleBase</span><span class=p>,</span> <span class=n>ModuleRefBase</span>

<span class=nd>@Module</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&quot;moduleA&quot;</span><span class=p>)</span>
<span class=k>class</span> <span class=nc>ModuleA</span><span class=p>:</span>
    <span class=k>pass</span>


<span class=nd>@Module</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&quot;ModuleB&quot;</span><span class=p>,</span> <span class=n>modules</span><span class=o>=</span><span class=p>[</span><span class=n>ForwardRefModule</span><span class=p>(</span><span class=n>module_name</span><span class=o>=</span><span class=s2>&quot;moduleA&quot;</span><span class=p>)])</span>
<span class=k>class</span> <span class=nc>ModuleB</span><span class=p>(</span><span class=n>ModuleBase</span><span class=p>):</span>
    <span class=nd>@classmethod</span>
    <span class=k>def</span> <span class=nf>post_build</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>module_ref</span><span class=p>:</span> <span class=n>ModuleRefBase</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>assert</span> <span class=n>ModuleA</span> <span class=ow>in</span> <span class=n>module_ref</span><span class=o>.</span><span class=n>modules</span>


<span class=nd>@Module</span><span class=p>(</span><span class=n>modules</span><span class=o>=</span><span class=p>[</span><span class=n>ModuleA</span><span class=p>,</span> <span class=n>ModuleB</span><span class=p>])</span>
<span class=k>class</span> <span class=nc>ApplicationModule</span><span class=p>(</span><span class=n>ModuleBase</span><span class=p>):</span>
    <span class=k>pass</span>
</code></pre></div> <p>In this second example: - <code>ModuleB</code> references <code>ModuleA</code> by its name, <code>"moduleA"</code>. - During the build process of <code>ApplicationModule</code>, the name reference is resolved, ensuring that <code>ModuleA</code> is instantiated and injected into <code>ModuleB</code> correctly.</p> <p>This method allows you to define module dependencies without worrying about the order of their definition, providing greater modularity and flexibility in your application's architecture.</p> <p>By using <code>ForwardRefModule</code>, you can build complex, interdependent module structures without running into issues related to instantiation order or circular dependencies, making your codebase more maintainable and easier to manage.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 22, 2024</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../providers/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Providers"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Providers </div> </div> </a> <a href=../middleware/ class="md-footer__link md-footer__link--next" aria-label="Next: Middlewares"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Middlewares </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 <a href=https://github.com/eadwinCode target=_blank rel=noopener>Eadwin Ezeudoh</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "search.highlight", "search.share", "search.suggest", "toc.follow", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.prune", "navigation.tabs", "navigation.left", "navigation.tracking"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.88dd0f4e.min.js></script> </body> </html>